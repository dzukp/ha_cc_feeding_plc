title: Б 17
path: pool_17
sections:
  - type: grid
    cards:
      - type: heading
        heading_style: title
        heading: Состояние
      - graph: line
        type: sensor
        entity: sensor.b17_kislorod
        detail: 1
        name: Кислород
        icon: mdi:chart-bubble
        grid_options:
          columns: 12
          rows: 2
      - graph: line
        type: sensor
        entity: sensor.b17_temperatura
        detail: 1
        name: Температура
        grid_options:
          columns: full
          rows: 2
      - show_name: true
        show_icon: true
        show_state: true
        type: glance
        entities:
          - entity: binary_sensor.b17_avtomat
            name: Автомат
            icon: mdi:desktop-classic
          - entity: binary_sensor.b17_ruchnoi
            name: Ручной
            icon: mdi:hand-back-left
          - entity: binary_sensor.b17_klapan_kisloroda
            name: Клапан O₂
            icon: mdi:pipe-valve
          - entity: sensor.b17_avariia
            name: Авария
            icon: mdi:alarm-light
        columns: 4
        state_color: true
      - type: heading
        heading_style: title
        heading: Шкаф
        icon: mdi:file-cabinet
      - type: entities
        entities:
          - entity: sensor.sh2_vremia
            icon: mdi:clock-time-nine
            name: Время
  - type: grid
    cards:
      - type: heading
        heading_style: title
        heading: Кормушка
        icon: mdi:shaker
        badges: []
      - type: entities
        entities:
          - entity: sensor.b17_kormlenie_1
            name: Состояние
          - entity: sensor.b17_proshlo_korm_1
            name: Прошло кормлений
            icon: mdi:counter
          - entity: sensor.b17_sled_korm_1
            name: Следующее кормление
            icon: mdi:timer
          - entity: binary_sensor.b17_korm_1_pusk
            name: Пуск кормушки
      - type: custom:state-switch
        entity: group
        states:
          admin:
            type: entities
            entities:
              - entity: time.b17_vremia_nachala_1
                name: Начало кормления
              - entity: time.b17_period_1
                name: Периодичность
              - entity: number.b17_ust_kol_vo_kormlenii_1
                name: Кол-во
                icon: mdi:counter
              - entity: number.b17_ust_dlitelnost_1
                name: Длительность, сек
                icon: mdi:timer
          user:
            type: markdown
            content: |
              |  |  |
              |-----------|-----------|
              | **Начало кормления** | {{ states('time.b17_vremia_nachala_1').replace('unknown', '-') }} |
              | **Периодичность** | {{ states('time.b17_period_1').replace('unknown', '-') }} |
              | **Кол-во** | {{ states('number.b17_ust_kol_vo_kormlenii_1').replace('unknown', '-') }} |
              | **Длительность** | {{ states('number.b17_ust_dlitelnost_1').replace('unknown', '-') }} сек |
  - type: grid
    cards:
      - type: heading
        heading_style: title
        heading: Аварии
        icon: mdi:alarm-light
      - type: entities
        entities:
          - entity: binary_sensor.b17_avariia_vysokaia_temperatura
            name: Высокая температура
            secondary_info: last-changed
          - entity: binary_sensor.b17_avariia_nizkaia_temperatura
            name: Низкая температура
            secondary_info: last-changed
          - entity: binary_sensor.b17_avariia_vysokii_kislorod
            name: Высокий кислород
            secondary_info: last-changed
          - entity: binary_sensor.b17_avariia_nizkii_kislorod
            name: Низкий кислород
            secondary_info: last-changed
          - entity: binary_sensor.b17_avariia_datchika_ksiloroda
            name: Ошибка датчика кислорода
            secondary_info: last-changed
      - type: heading
        heading_style: title
        heading: Игнорирование аварий
        icon: mdi:toggle-switch-variant
      - type: custom:state-switch
        entity: group
        states:
          admin:
            type: entities
            entities:
              - entity: switch.b17_ignor_avarii_temperatury
                name: Температура
              - entity: switch.b17_ignor_avarii_kisloroda
                name: Кислород
          user:
            type: markdown
            content: |
              |   |   |
              |-----------|-----------|
              | **Температура** | {{ states('switch.b17_ignor_avarii_temperatury') | replace('on', '✔️') | replace('off', '✖️') }} |
              | **Кислород** | {{ states('switch.b17_ignor_avarii_kisloroda') | replace('on', '✔️') | replace('off', '✖️') }} |

header:
  card:
    type: markdown
    content: '# Бассейн 17'
    text_only: true
